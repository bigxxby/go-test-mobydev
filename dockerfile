# Используем образ golang в качестве базового для сборки
FROM golang:latest

# Устанавливаем переменную окружения для Go модулей
ENV GO111MODULE=on

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /go/src/app

# Копируем все файлы из текущего контекста внутрь рабочей директории
COPY . .

# Собираем приложение внутри контейнера
RUN go build -o main ./cmd/web

# Экспортируем порт 8080
EXPOSE 8080

# Запускаем сервер при старте контейнера
CMD ["./main"]
